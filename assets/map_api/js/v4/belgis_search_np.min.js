function BelgisSearchNP(d,b){MapApiKey=d;minScale=typeof(b)!="undefined"&&b>=0?b:0;this.OblastSelected=function(h,g,f){var i=document.getElementById("belgis_region");i.innerHTML='<option value="0"> - - - - - - - - - - - - - - -</option>';i.outerHTML='<select name="region" size="1" id="belgis_region" onchange="'+h+".RegionSelected('"+h+"',this.value, "+f+')"><option value="0"> - - - - - - - - - - - - - - -</option></select>';def=jQuery.ajax({type:"GET",url:urlMapF+"/getregion.php",data:"region="+g+"&key="+MapApiKey,dataType:"jsonp",success:function(j){e(h,j.Data,f)}});a(h,g,f)};var a=function(i,h,f){if(h==0){return false}var g=document.getElementById("belgis_city");g.innerHTML='<option value="0">- - - - - - - - - - - - - - -</option>';g.outerHTML='<select name="city" size="1" id="belgis_city" class="last"  onchange="'+i+".CitySelected(this.value, "+f+')"><option value="0">- - - - - - - - - - - - - - -</option></select>';def=jQuery.ajax({type:"GET",url:urlMapF+"/getcity2.php",data:"region="+h+"&key="+MapApiKey,dataType:"jsonp",success:function(j){c(i,j.Data,f)}})};this.RegionSelected=function(i,h,f){if(h==0){return false}var g=document.getElementById("belgis_city");g.innerHTML='<option value="0">- - - - - - - - - - - - - - -</option>';g.outerHTML='<select name="city" size="1" id="belgis_city" class="last"  onchange="'+i+".CitySelected(this.value,"+f+')"><option value="0">- - - - - - - - - - - - - - -</option></select>';def=jQuery.ajax({type:"GET",url:urlMapF+"/getcity.php",data:"region="+h+"&key="+MapApiKey,dataType:"jsonp",success:function(j){c(i,j.Data,f)}})};var e=function(h,g,f){var i=document.getElementById("belgis_region");i.innerHTML=g;i.outerHTML='<select name="region" size="1" id="belgis_region" onclick="'+h+".RegionSelected('"+h+"', this.value, "+f+')" onchange="'+h+".RegionSelected('"+h+"',this.value, "+f+')">'+g+"</select>"};this.CitySelected=function(g,f){if(g==0){return false}def=jQuery.ajax({type:"GET",url:urlMapF+"/getmap.php",data:"city="+g+"&key="+MapApiKey,dataType:"jsonp",success:function(i){var h=i.Data.split(",");if(h.length>1){if(typeof(f)=="function"){f(h[0],h[1],h[2])}}}})};var c=function(j,i,f){var g=i.split("|");var h=document.getElementById("belgis_city");h.innerHTML=g[0];h.outerHTML='<select name="city" size="1" id="belgis_city" class="last" onclick="'+j+".CitySelected(this.value, "+f+')"  onchange="'+j+".CitySelected(this.value, "+f+')">'+g[0]+"</select>";if(g.length>1){if(typeof(f)=="function"){f(g[1],g[2],parseInt(g[3])+minScale)}}};this.OnSearch=function(f,h){var g=null;if(f.length==0||f.search("Город, улица, дом")==0){alert("Пожалуйста, заполните поле для поиска!");return null}def=jQuery.ajax({type:"GET",url:urlMapF+"/search.php",data:"search_text="+encodeURIComponent(f)+"&key="+MapApiKey+"&host="+window.location.host,dataType:"jsonp",async:false,success:function(i){g=i;if(typeof(h)=="function"){setTimeout(h,0)}}});return g}};