function BelgeoMap(I){var Z=1;var M=[52181.01,26090.505208,13045.2526,6522.6263,3261.31315,1630.65674,815.3284,407.66406,203.83203,101.91602,50.958,25.479,12.7395,6.36975,3.18488,1.59244,0.796219,0.39811];var aJ=[52181.01,26090.505208,13045.2526,6522.6263,3261.31315,1630.65674,815.3284,407.66406,203.83203,101.91602,50.958,25.479,12.7395,6.36975,3.18488,1.59244,0.796219,0.39811];var au=[78271.51696399994,39135.75848200009,19567.87924099992,9783.93962049996,4891.96981024998,2445.98490512499,1222.992452562495,611.4962262813797,305.74811314055756,152.87405657041106,76.43702828507324,38.21851414253662,19.10925707126831,9.554628535634155,4.77731426794937,2.388657133974685,1.1943285668550503,0.5971642835598172];var bj=[78271.51696399994,39135.75848200009,19567.87924099992,9783.93962049996,4891.96981024998,2445.98490512499,1222.992452562495,611.4962262813797,305.74811314055756,152.87405657041106,76.43702828507324,38.21851414253662,19.10925707126831,9.554628535634155,4.77731426794937,2.388657133974685,1.1943285668550503,0.5971642835598172];var g=M;var f=aJ;var aL=[768,1536,3072,6144,12288,24576,49152,98304,196608,393216,786432,1572864,3145728,6291456,12582912,25165824,50331648,100663296];var u=[768,1536,3072,6144,12288,24576,49152,98304,196608,393216,786432,1572864,3145728,6291456,12582912,25165824,50331648,100663296];var bk=[512,1024,2048,4096,8192,16384,32768,65536,131072,262144,524288,1048576,2097152,4194304,8388608,16777216,33554432,67108864];var ag=[512,1024,2048,4096,8192,16384,32768,65536,131072,262144,524288,1048576,2097152,4194304,8388608,16777216,33554432,67108864];var e=aL;var d=u;var ak=148;var n=162;var J=[{name:"belgis_cosmos",type:"jpg",url:"/tile/cosmos/",max_scale:12},{name:"belgis_map",type:"png",url:"/tile/map/",max_scale:12},{name:"belgis_map_en",type:"png",url:"/tile/map_en/",max_scale:12},{name:"belgis_hybrid",type:"jpg",url:"/tile/hybrid/",max_scale:12},{name:"osm_true",type:"png",url:"http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",max_scale:16},{name:"osm_terrestris",type:"png",url:"http://ows.terrestris.de/osm/service?SERVICE=WMS&REQUEST=GetMap&VERSION=1.1.1&LAYERS=OSM-WMS&STYLES=&FORMAT=image%2Fpng&TRANSPARENT=false&HEIGHT=256&WIDTH=256&SRS=EPSG%3A3857&BBOX=",max_scale:17},{name:"osm",type:"png",url:"http://irs.gis-lab.info?SERVICE=WMS&REQUEST=GetMap&VERSION=1.1.1&LAYERS=osm&STYLES=&FORMAT=image%2Fpng&TRANSPARENT=false&HEIGHT=256&WIDTH=256&SRS=EPSG%3A3857&BBOX=",max_scale:16},{name:"arcmap",type:"jpg",url:"http://services.arcgisonline.com/arcgis/rest/services/World_Imagery/MapServer/WMTS/tile/1.0.0/World_Imagery/default/GoogleMapsCompatible/",max_scale:17},{name:"arcmap_topo",type:"jpg",url:"http://services.arcgisonline.com/arcgis/rest/services/World_Topo_Map/MapServer/WMTS/tile/1.0.0/World_Topo_Map/default/GoogleMapsCompatible/",max_scale:17}];var ar=[];var V=J[1];var L=undefined;var ah="belgis_poi";var aD="belgis_main";var aV="belgis_map";var av,am;var aC=[];var aY=[];var ab="belgis_vector";var F,aT;var a9="belgis_bubbles";var aG=256;var aE,bd,a4;var be=0;var aa=0;var h=0;var aA=V.max_scale;var aP=-1;var aq=0;var ao=0;var aI=768;var x=512;var aS=0;var aK=0;var aR=768;var C=512;var W=0;var S=0;var a2="";var al=["",""];var a8=["",""];var an=new TilesLayer();var bl=[];var q=new BelgeoMath();var bb=new PoiLayer(ah);gLayer=new GraphicsLayer();var z=new Array();var a5=new Array();var T=false;var aO=false;var R=false;var aW=0;var k=false;var X=false;var m=false;var ac=false;var a3=false;var c=false;var Y=[0,0];var aB=false;var Q=false;var aZ=false;var af=false;var at=0;var aH=0;var G=0;var O=0;urlMapF="";var D=0;var B=0;var ae=false;var bh="undefined";mapChanged=function(bm){if(typeof(bh)=="function"){bh(bm)}};var r=function(){var bt=document.getElementById(ah);bt.style.left="0px";bt.style.top="0px";W=Math.ceil(aR/aG)+2;S=Math.ceil(C/aG)+2;var bp=Math.floor((-(aS))/aG);var bo=Math.floor((-(aK))/aG);for(yM=0;yM<S;yM++){for(xM=0;xM<W;xM++){var bn=parseInt(yM)+parseInt(bo);var bu=parseInt(xM)+parseInt(bp);var bq=((bu)*aG)+aS;var br=((bn)*aG)+aK;var bm=((yM)*W+xM+1);var bs=aU(bu,bn,aG,bq,br);an.addTile(am,bs,bm,bq,br,bu,bn,aG);if(Object.keys(bl).length>0){var bv=az(bq,br,aG,aG);for(ckey=0;ckey<Object.keys(aY).length;ckey++){bl[Object.keys(bl)[ckey]].addTile(aY[Object.keys(bl)[ckey]],bm,bq,br,bu,bn,aG,aG,bv)}}}}l();aw()};updateCanvas=function(bo,bn){clearContent(am,av.width,av.height);an.moveAllTiles(am,bo,bn);if(Object.keys(bl).length>0){for(ckey=0;ckey<Object.keys(aY).length;ckey++){clearContent(aY[Object.keys(bl)[ckey]],aC[Object.keys(bl)[ckey]].width,aC[Object.keys(bl)[ckey]].height);bl[Object.keys(bl)[ckey]].moveAllTiles(aY[Object.keys(bl)[ckey]],bo,bn)}}b(bo,bn);var bm=document.getElementById(ah);bm.style.left=bo+"px";bm.style.top=bn+"px"};var t=function(bn,bm,bp){var bo=document.getElementById(bn);if(bo.addEventListener){bo.addEventListener(bm,bp,false)}else{if(bo.attachEvent){bo.attachEvent("on"+bm,bp)}}};clearContent=function(bn,bm,bo){bn.clearRect(0,0,bm,bo)};updateSize=function(){var bn=document.getElementById(aD);var bm=BelgeoCommon.getSize(bn);if(aR!=bm.width||C!=bm.height){aR=bm.width;C=bm.height}for(ckey=0;ckey<Object.keys(aC).length;ckey++){aC[Object.keys(bl)[ckey]].width=aR;aC[Object.keys(bl)[ckey]].height=C}av.width=F.width=aR;av.height=F.height=C;r();updateCanvas(0,0);clearTimeout(this._sizeTimer);this._sizeTimer=setTimeout(zoomer("updateSize"),0)};var a6=function(){if((Math.abs(aS)+aR)>(aI)){aS=aR-aI}if((Math.abs(aK)+C)>x){aK=C-x}if((parseInt(aS))>0){if(aI>aR){aS=0}else{aS=aS/2}}if((parseInt(aK))>0){if(x>C){aK=0}else{aK=aK/2}}};dragMap=function(bw){var bt=document.getElementById(ah);bt.style.left="0px";bt.style.top="0px";a6();var bq=Math.floor((-(aS))/aG);var bo=Math.floor((-(aK))/aG);if(bw!="endMoveTiles"){for(yM=0;yM<S;yM++){for(xM=0;xM<W;xM++){var bm=(yM)*W+xM+1;an.clearTile(am,bm);if(Object.keys(bl).length>0){for(ckey=0;ckey<Object.keys(bl).length;ckey++){bl[Object.keys(bl)[ckey]].clearTile(aY[Object.keys(bl)[Object.keys(bl)[ckey]]],bm)}}}}clearContent(am,av.width,av.height);for(ckey=0;ckey<Object.keys(aY).length;ckey++){clearContent(aY[Object.keys(bl)[ckey]],aC[Object.keys(bl)[ckey]].width,aC[Object.keys(bl)[ckey]].height)}}l();aw();for(yM=0;yM<S;yM++){for(xM=0;xM<W;xM++){var bm=(yM)*W+xM+1;var bn=parseInt(yM)+parseInt(bo);var bu=parseInt(xM)+parseInt(bq);var br=((bu)*aG)+aS;var bp=((bn)*aG)+aK;var bs=aU(bu,bn,aG,br,bp);an.replaceTile(am,bs,bm,br,bp,bu,bn,aG,bw);if(Object.keys(aY).length>0){var bv=az(br,bp,aG,aG);for(ckey=0;ckey<Object.keys(aY).length;ckey++){bl[Object.keys(bl)[ckey]].replaceTile(aY[Object.keys(bl)[ckey]],bm,br,bp,bu,bn,aG,aG,bv)}}}}moveScalePointer()};var w=function(){ae=true;a6();document.getElementById("belgis_wait").style.display="block"};var ap=function(){document.getElementById("belgis_wait").style.display="none";ae=false};zoomer=function(bm){dragMap(bm);ap()};var bg=function(bo){if(!ae){if(aa==h&&aa==aA){w()}var bn=-parseInt((aS-at)*g[aa]);var bm=parseInt((aK-aH)*f[aa]);if(bo=="minimize"){aa=parseInt(aa)-1}if(bo=="maximize"){aa=parseInt(aa)+1}if(aa>=h&&aa<=aA){clearContent(am,av.width,av.height)}if(aa<h){aa=h;return}if(aa>aA){aa=aA;return}aS=parseInt(((-bn)/g[aa])+at);aK=parseInt(((bm)/f[aa])+aH);aI=e[aa];x=d[aa];ViewScale();clearTimeout(this._sizeTimer);this._sizeTimer=setTimeout(zoomer("onClickDragW"),0);setTimeout("mapChanged('zoom')",0)}};document.getElementById(aD).ondblclick=function(bm){if(!bm){var bm=window.event}bg("maximize")};var v=function(bn){if((bn.timeStamp-aW)<500){return}aW=bn.timeStamp;if(!bn){var bn=window.event}var bs=bn.clientX;var br=bn.clientY;if(isNaN(bs)){bn.preventDefault();touch=bn.changedTouches[0];bs=touch.pageX;br=touch.pageY}var bp=bn.wheelDelta?(bn.wheelDelta/120):bn.detail/3*-1;if(bn.preventDefault){bn.preventDefault()}bn.returnValue=false;if(bp<0){bp=-1}else{if(bp>0){bp=1}}var bq=0;if((aa+bp)>=h&&(aa+bp)<=aA){var bo=document.getElementById(aD);var bm=BelgeoCommon.getOffset(bo);at=(bs-bm.left);aH=(br-bm.top);if(bp<0){bg("minimize")}else{if(bp>0){bg("maximize")}}moveScalePointer()}};if(document.getElementById(aD).addEventListener){document.getElementById(aD).addEventListener("DOMMouseScroll",v,false)}document.getElementById(aD).onmousewheel=v;var aj;var aX=document.getElementById(aD).onmousedown=function(bu){if(!bu){var bu=window.event}var bp=bu.clientX;var bn=bu.clientY;if(isNaN(bp)){bu.preventDefault();touch=bu.changedTouches[0];bp=touch.pageX;bn=touch.pageY;aZ=true;delay=250;if(bu.touches.length==1){var bo=Date.now(),bt=bo-(aj||bo);af=(bt>0&&bt<=delay);aj=bo}}var bq=BelgeoCommon.getOffset(document.getElementById(aD));var br=(bp-bq.left);var bm=(bn-bq.top);if(gLayer.isDraggableCircleHovered(br,bm)){X=true;R=gLayer.getCircle(br,bm);if(ba(R.id)){a3=true;c=false}else{if(a(R.id)){a3=false;c=true}else{a3=false;c=false}}}else{X=false}aB=true;Q=false;var bs=document.getElementById(aD);if(be==0||be==1||be==11||be==2||be==3){if(be!=3&&!k){bs.style.cursor="pointer"}var bq=BelgeoCommon.getOffset(bs);at=(bp-bq.left);aH=(bn-bq.top);D=(Math.floor((aq-aS)/aG));B=(Math.floor((ao-aK)/aG));if(R===false){aO=true}}return false};var p=document.getElementById(aD).onmouseup=function(bu){if(!bu){var bu=window.event}var bo=bu.clientX;var bn=bu.clientY;if(isNaN(bo)){bu.preventDefault();touch=bu.changedTouches[0];bo=touch.pageX;bn=touch.pageY;aZ=false;if(af){af=false;bg("maximize");return}}aB=false;if(T===true){T=false;aO=false;onClickDrag();G=0;O=0}if(aO===true&&R===false){aO=false;if((Math.abs(aq)>5)||(Math.abs(ao)>5)){ax(aq,ao);setTimeout("mapChanged('move')",0)}else{var br=BelgeoCommon.getOffset(document.getElementById(aD));var bs=(bo-br.left);var bm=(bn-br.top);var bq=-parseInt((aS-bs+e[aa]/2)*g[aa]);var bp=parseInt((aK-bm+d[aa]/2)*f[aa]);al=q.XYtoBL(bq,bp);al[0]=Math.round(al[0]*100000)/100000;al[1]=Math.round(al[1]*100000)/100000;if(be==1){bi(al[0],al[1])}else{if(be==11){N(al[0],al[1])}}}var bt=document.getElementById(aD);if(be!=3){bt.style.cursor="default"}aq=0;ao=0}if(k){k=false;X=false;ac=false;m=false;Y=[0,0]}if(a3){a3=false}if(c){c=false}if(R!==false){R=false}Q=true;return false};var P=onmousemove=document.onmousemove=function(bu){if(!bu){var bu=window.event}var bo=bu.clientX;var bn=bu.clientY;if(bu.buttons==0&&(aZ||aB||T||k||aO)){p(bu)}if(isNaN(bo)){touch=bu.targetTouches[0];bo=touch.pageX;bn=touch.pageY;if(bu.touches.length>1){return false}}else{if(aZ){return true}}var bt=document.getElementById(aD);if(gLayer.isGraphicObjectHovered(bo,bn)){bt.style.cursor="pointer"}else{bt.style.cursor="default"}var br=BelgeoCommon.getOffset(bt);var bs=(bo-br.left);var bm=(bn-br.top);var bq=-parseInt((aS-bs+e[aa]/2)*g[aa]);var bp=parseInt((aK-bm+d[aa]/2)*f[aa]);al=q.XYtoBL(bq,bp);a8[0]=bq;a8[1]=bp;al[0]=Math.round(al[0]*100000)/100000;al[1]=Math.round(al[1]*100000)/100000;if(aB&&X){A(R.id,al[0],al[1])}if(k){if(ac){movePolygon(R[0],al[0],al[1])}return false}if(T===true){ay(bu);return false}if(aO===true){ad(bu);return false}return false};if(document.getElementById(aD).addEventListener){document.getElementById(aD).addEventListener("touchstart",aX);document.getElementById(aD).addEventListener("touchend",p);document.getElementById(aD).addEventListener("touchmove",P)}else{if(document.getElementById(aD).attachEvent){document.getElementById(aD).addEventListener("ontouchstart",aX);document.getElementById(aD).addEventListener("ontouchend",p);document.getElementById(aD).addEventListener("ontouchmove",P)}}var aU=function(br,bs,bo,bq,bp){var bn=a2+V.url+br+"/"+bs+"/"+(aa+1)+"."+V.type;if(V.name=="osm"||V.name=="osm_terrestris"){nwx=-((aS-bq+e[aa]/2)*g[aa]);nwy=(aK-bp+d[aa]/2)*f[aa];sex=-(aS-(bq+bo)+e[aa]/2)*g[aa];sey=(aK-(bp+bo)+d[aa]/2)*f[aa];bn=V.url+nwx+","+sey+","+sex+","+nwy}if(V.name=="arcmap"||V.name=="arcmap_topo"){bn=V.url+(aa+1)+"/"+(bs)+"/"+(br)}if(V.name=="osm_true"){var bm=["a","b","c"];bn=V.url.replace("{s}",bm[Math.round(Math.random()*2)]);bn=bn.replace("{z}",(aa+1)).replace("{x}",br).replace("{y}",bs)}return bn};var az=function(bp,bo,bm,bn){nwx=-((aS-bp+e[aa]/2)*g[aa]);nwy=(aK-bo+d[aa]/2)*f[aa];sex=-(aS-(bp+bm)+e[aa]/2)*g[aa];sey=(aK-(bo+bn)+d[aa]/2)*f[aa];return{nwx:nwx,nwy:nwy,sex:sex,sey:sey}};var a1=function(bm,bo,bq){if(typeof(_ckey)!="undefined"){var bn=bq*aG+aS;var bp=az(bn,an.getTileTop(bo),aG,aG);setTimeout(bl[_ckey].replaceTile(aY[_ckey],bo,bn,an.getTileTop(bo),bq,an.getTilePlaceY(bo),aG,aG,bp),200)}};var a0=function(bn,bo,bp){if(typeof(bn)!="undefined"){var bm=bp*aG+aK;var bq=az(an.getTileLeft(bo),bm,aG,aG);setTimeout(bl[bn].replaceTile(aY[bn],bo,an.getTileLeft(bo),bm,an.getTilePlaceX(bo),bp,aG,aG,bq),200)}};var K=function(bm,bo,bq){var bn=bq*aG+aS;var bp=aU(bq,an.getTilePlaceY(bo),aG,bn,an.getTileTop(bo));setTimeout(an.replaceTile(bm,bp,bo,bn,an.getTileTop(bo),bq,an.getTilePlaceY(bo),aG,"changeTileByX"),200)};var H=function(bn,bo,bq){var bm=bq*aG+aK;var bp=aU(an.getTilePlaceX(bo),bq,aG,an.getTileLeft(bo),bm);setTimeout(an.replaceTile(bn,bp,bo,an.getTileLeft(bo),bm,an.getTilePlaceX(bo),bq,aG,"changeTileByY"),200)};var o=function(bp,bn){clearContent(am,av.width,av.height);for(ckey=0;ckey<Object.keys(aY).length;ckey++){clearContent(aY[Object.keys(bl)[ckey]],aC[Object.keys(bl)[ckey]].width,aC[Object.keys(bl)[ckey]].height)}if(D!=(Math.floor((bp-aS)/aG))){D=(Math.floor((bp-aS)/aG));var bm=true;var bq=false;while(bm){MinX=an.getMinX(bp,aG,W);if(MinX[1]>-aG||MinX[0]==-1){bm=false}else{bq=true;for(yM=0;yM<S;yM++){var bo=MinX[0];bo+=(yM)*W;var bs=an.getTilePlaceX(bo)+W;K(am,bo,bs);for(ckey=0;ckey<Object.keys(aY).length;ckey++){a1(Object.keys(bl)[ckey],bo,bs)}}}}bm=true;if(!bq){while(bm){MaxX=an.getMaxX(bp,aR,W);if(MaxX[1]<(aR+aG)||MaxX[0]==-1){bm=false}else{for(yM=0;yM<S;yM++){var bo=MaxX[0];bo+=(yM)*W;var bs=an.getTilePlaceX(bo)-W;K(am,bo,bs);for(ckey=0;ckey<Object.keys(aY).length;ckey++){a1(Object.keys(bl)[ckey],bo,bs)}}}}}}if(B!=(Math.floor((bn-aK)/aG))){B=(Math.floor((bn-aK)/aG));bm=true;notY=false;while(bm){MinY=an.getMinY(bn,aG,S,W);if(MinY[1]>-aG||MinY[0]==-1){bm=false}else{notY=true;for(yM=0;yM<W;yM++){var bo=MinY[0]+(yM);var br=an.getTilePlaceY(bo)+S;H(am,bo,br);for(ckey=0;ckey<Object.keys(aY).length;ckey++){a0(Object.keys(bl)[ckey],bo,br)}}}}bm=true;if(!notY){while(bm){MaxY=an.getMaxY(bn,C,S,W);if(MaxY[1]<(C+aG)||MaxY[0]==-1){bm=false}else{for(yM=0;yM<W;yM++){var bo=MaxY[0]+yM;var br=an.getTilePlaceY(bo)-S;H(am,bo,br);for(ckey=0;ckey<Object.keys(aY).length;ckey++){a0(Object.keys(bl)[ckey],bo,br)}}}}}}updateCanvas(bp,bn)};var ax=function(bn,bm){if(!ae){w()}aS=parseInt(aS)+parseInt(bn);aK=parseInt(aK)+parseInt(bm);G=0;O=0;clearTimeout(this._sizeTimer);this._sizeTimer=setTimeout(zoomer("endMoveTiles"),200)};var ad=function(bn){var bq=bn.clientX;var bp=bn.clientY;if(isNaN(bq)){bn.preventDefault();touch=bn.changedTouches[0];bq=touch.pageX;bp=touch.pageY}var bo=document.getElementById(aD);var bm=BelgeoCommon.getOffset(bo);G=(bq-bm.left);O=(bp-bm.top);if((Math.abs(aS)-(G-at))>=0&&(Math.abs(aS+(G-at))+aR)<=(aI)){aq=G-at}else{at=G-aq}if((Math.abs(aK)-(O-aH))>=0&&(Math.abs(aK+(O-aH))+C)<=x){ao=O-aH}else{aH=O-ao}o(aq,ao)};var U=function(){if(typeof(aP)=="number"&&aP>0&&((aP^0)==aP&&V.max_scale>=aP)){aA=aP-1}else{aA=V.max_scale}};var aF=function(bn){var bo=false;if(typeof(bn)!=="undefined"){if(V.name!=bn){for(var bm=0;bm<J.length;bm++){if(J[bm].name==bn){V=J[bm];break}}if(V.name=="osm_true"||V.name=="arcmap"||V.name=="arcmap_topo"){e=bk;d=ag;g=au;f=bj}else{e=aL;d=u;g=M;f=aJ}bo=true}U()}return bo};document.oncontextmenu=function(bm){return false};ViewScale=function(){var bm=urlMapF+"/map/scale"+(aa+1)+".gif";document.getElementById("belgis_scale_ch").src=bm};var bf=function(bm){if(typeof(bm)==="undefined"){return}else{if(be==bm){be=0}else{be=bm}}};var A=function(bq,bp,bo){var bn=bp+Y[0];var bm=bo+Y[1];_self.changeCircleBL(bq,bn,bm);_self.recalcCircle(bq);updateCanvas(0,0);if(a3){aN(bq,bn,bm)}if(c){y(bq,bn,bm)}};moveScalePointer=function(){var bn=n-(aa-h)*(ak/(aA-h+1));var bm=document.getElementById("belgis_drag");if(bm!=null&&typeof(bm)!="undefined"){bm.style.marginTop=bn+"px"}};var ay=function(bp){var bn=document.getElementById("belgis_drag");var bm=BelgeoCommon.getOffset(bn);O=(bp.clientY-bm.top)-10;var bo=parseInt(bn.style.marginTop.replace("px",""));var bq=Math.ceil((bo-22+O)/(ak/(aA-h)))+h;if(bq<=0){bq=0}if(bq>=(aA)){bq=aA}if((aa-h)>(aA-bq)){onClickDrag("minimize");moveScalePointer()}else{if((aa-h)<(aA-bq)){onClickDrag("maximize");moveScalePointer()}}};document.getElementById("belgis_drag").onmousedown=function(bn){if(!bn){var bn=window.event}var bp=bn.clientX;var bo=bn.clientY;if(isNaN(bp)){bn.preventDefault();touch=bn.changedTouches[0];bp=touch.pageX;bo=touch.pageY}T=true;var bm=BelgeoCommon.getOffset(document.getElementById("belgis_drag"));at=(bp-bm.left);aH=(bo-bm.top);return false};document.getElementById("belgis_drag").onmouseup=function(bm){if(T===true){T=false;aO=false;onClickDrag();G=0;O=0}return false};onClickDrag=function(bq){if(aa>=h){if(!ae){if(aa==h&&aa==aA){w()}}}var bp=aR/2;var bo=C/2;var bn=-parseInt((aS-bp)*g[aa]);var bm=parseInt((aK-bo)*f[aa]+Z);if(bq=="minimize"){aa=parseInt(aa)-1}if(bq=="maximize"){aa=parseInt(aa)+1}if(aa>=h&&aa<=aA){clearContent(am,av.width,av.height)}if(aa<h){aa=h;return}if(aa>aA){aa=aA;return}aS=parseInt(((0-bn)/g[aa])+bp);aK=parseInt(((bm-Z)/f[aa])+bo);aI=e[aa];x=d[aa];ViewScale();clearTimeout(this._sizeTimer);this._sizeTimer=setTimeout("zoomer()",0);setTimeout("mapChanged('zoom')",0)};onClickMove=function(bm){aq=0;ao=0;switch(bm){case"left":aS=aS+Math.round((aR*2/3));if(aS>0){aS=0}break;case"right":aS=aS-Math.round((aR*2/3));if(aS<(aR-aI)){aS=aR-aI}break;case"top":aK=aK+Math.round((C*2/3));if(aK>0){aK=0}break;case"bottom":aK=aK-Math.round((C*2/3));if(aK<(C-x)){aK=C-x}break;case"center":_self.onUrlMap(aE,bd,a4);break}if(!ae){w()}dragMap("onClickMove");ap()};var a=function(bn){for(var bm=0;bm<a5.length;bm++){if(a5[bm].id==bn){return true}}return false};var ba=function(bn){for(var bm=0;bm<z.length;bm++){if(z[bm].id==bn){return true}}return false};var aN=function(bo,bp,by){var bn=parseInt(bo.replace(/ruler_point/g,""));var bv=z.length;z[bn]["B"]=bp;z[bn]["L"]=by;if(bv>1){var bm=j();var bx=document.getElementById("belgis_dist");var bt=q.GradToM(z[bv-1]["B"],z[bv-1]["L"]);if(typeof(bx)!="undefined"&&bx!=null){if(bn==(bv-1)){var bs=parseInt(aS-parseFloat(-(bt[1])/g[aa]+aR/2-e[aa]/2)+aR/2)+10;var br=parseInt(aK-parseFloat((bt[0])/f[aa]+C/2-d[aa]/2)+C/2)+10;bx.style.left=bs+"px";bx.style.top=br+"px"}document.getElementById("belgis_dist_txt").innerHTML=bm}else{var bs=parseInt(aS-parseFloat(-(bt[1])/g[aa]+aR/2-e[aa]/2)+aR/2)+10;var br=parseInt(aK-parseFloat((bt[0])/f[aa]+C/2-d[aa]/2)+C/2)+10;ai("belgis_dist",bs,br,bm,bc)}}var bw=[0,0];var bq=[0,0];if(bn!=0){var bu=bn-1;z[bu]["B"][1]=bp;z[bu]["L"][1]=by;bw[1]=bp;bq[1]=by;bw[0]=z[bu]["B"][0];bq[0]=z[bu]["L"][0];_self.changeLineBL(z[bu]["id"],bw,bq);_self.recalcLine(z[bu]["id"])}bu=bn+1;if((bu)<z.length){z[bu]["B"][0]=bp;z[bu]["L"][0]=by;bw[1]=bp;bq[1]=by;bw[0]=z[bu]["B"][1];bq[0]=z[bu]["L"][1];_self.changeLineBL(z[bu]["id"],bw,bq);_self.recalcLine(z[bu]["id"])}};var y=function(bo,bp,bw){var bn=parseInt(bo.replace(/area_point/g,""));var bu=a5.length;if(bn==0&&bu==1){a5[bn]["B"]=bp;a5[bn]["L"]=bw;return}a5[0]["B"][bn]=bp;a5[0]["L"][bn]=bw;if(bu==3){_self.changeLineBL(a5[0]["id"],a5[0]["B"],a5[0]["L"]);_self.recalcLine(a5[0]["id"])}else{if(bu>3){_self.changePolygonBL(a5[0]["id"],a5[0]["B"],a5[0]["L"]);_self.recalcPolygon(a5[0]["id"]);var bm=s();var bv=document.getElementById("belgis_area_div");var bt=a5[0]["B"].length;var bs=q.GradToM(a5[0]["B"][bt-1],a5[0]["L"][bt-1]);if(typeof(bv)!="undefined"&&bv!=null){if(bn==(bt-1)){var br=parseInt(aS-parseFloat(-(bs[1])/g[aa]+aR/2-e[aa]/2)+aR/2)+10;var bq=parseInt(aK-parseFloat((bs[0])/f[aa]+C/2-d[aa]/2)+C/2)+10;bv.style.left=br+"px";bv.style.top=bq+"px"}document.getElementById("belgis_dist_txt").innerHTML=bm}else{var br=parseInt(aS-parseFloat(-(bs[1])/g[aa]+aR/2-e[aa]/2)+aR/2)+10;var bq=parseInt(aK-parseFloat((bs[0])/f[aa]+C/2-d[aa]/2)+C/2)+10;ai("belgis_dist",br,bq,bm,E)}}}};var j=function(){var bo=0;var bm=z.length;var bn=1;var bq=[0,0];var bp=[0,0];while(bn<bm){bo+=q.Length(z[bn]["L"][0],z[bn]["B"][0],z[bn]["L"][1],z[bn]["B"][1]);bn+=2}if(bo>1000){bo=parseInt(bo/10)/100+" km"}else{bo=parseInt(bo*10)/10+" m"}return bo};function s(){if(a5.length!=0){var bn=a5[0].B.length;var bm=0;var bp=0;var bo=0;for(i=0;i<bn-1;i++){arrBL=q.GradToM(a5[0].L[i],a5[0].B[i]);arrBL2=q.GradToM(a5[0].L[i+1],a5[0].B[i+1]);bm=arrBL[1]+arrBL2[1];bp=arrBL[0]-arrBL2[0];bo+=bm*bp}arrBL=q.GradToM(a5[0].L[bn-1],a5[0].B[bn-1]);arrBL2=q.GradToM(a5[0].L[0],a5[0].B[0]);bm=arrBL[1]+arrBL2[1];bp=arrBL[0]-arrBL2[0];bo+=bm*bp;bo=Math.abs((bo)/4/10000);return parseFloat(bo).toFixed(2).replace(/./g,function(bs,br,bq){return br&&bs!=="."&&((bq.length-br)%3===0)?","+bs:bs})+" Га"}}var ai=function(bs,bp,bn,bm,bw){aM=bp;aQ=bn;var bv=document.createElement("div");bv.id=bs;bv.className="belgis_bubble";bv.style.top=bn+"px";bv.style.left=bp+"px";var bx={w:100,h:50};bx=BelgeoCommon.getDimensions(bm,bx);if(C/(bx.h+90)<2){bx.w=bx.w*whidth/(bx.h+90);bx.h=0;bx=BelgeoCommon.getDimensions(bm,bx)}bv.style.width=bx.w+10+"px";bv.zindex=1000;var bq=document.createElement("div");bq.className="belgis_bubble_close";bq.appendChild(document.createTextNode("X"));bq.onmousedown=bq.ontouchend=function(by){by=by||window.event;if(typeof(bw)!="undefined"&&bw!=null){bw()}if(by.stopPropagation){by.stopPropagation()}else{by.cancelBubble=true}};var bu=document.createElement("div");bu.className="belgis_bubble_box";var br=document.createElement("div");br.className="belgis_bubble_text";br.id="belgis_dist_txt";br.appendChild(document.createTextNode(bm));bu.appendChild(br);bv.appendChild(bq);bv.appendChild(bu);var bo=document.getElementById(bs);var bt=document.getElementById(a9);if(bo!=null&&typeof(bo)!="undefined"){bt.replaceChild(bv,bo)}else{bt.appendChild(bv)}};var bi=function(bn,bx){var bv=_self.rulerPoint;var bu=_self.rulerLine;var bt;var br=z.length;if(br>0){bu.id="ruler_line"+br;var bo=[z[br-1]["B"],bn];var bw=[z[br-1]["L"],bx];z.push({B:[z[br-1]["B"],bn],L:[z[br-1]["L"],bx],id:"ruler_line"+br});br++;_self.addLine(bo,bw,bu,true);var bm=j();var bs=q.GradToM(bn,bx);var bq=parseInt(aS-parseFloat(-(bs[1])/g[aa]+aR/2-e[aa]/2)+aR/2)+10;var bp=parseInt(aK-parseFloat((bs[0])/f[aa]+C/2-d[aa]/2)+C/2)+10;ai("belgis_dist",bq,bp,bm,bc)}bv.id="ruler_point"+br;z.push({B:bn,L:bx,id:"ruler_point"+br});_self.addCircle(bn,bx,bv,true)};var N=function(bn,bw){var bv=_self.rulerPoint;var bu=_self.rulerLine;var bt;var bq=a5.length;var bs=0;if(bq==1){bu.id="area_line";a5.unshift({B:[a5[0]["B"],bn],L:[a5[0]["L"],bw],id:"area_line"});_self.addLine(a5[0].B,a5[0].L,bu,true)}else{if(bq>1){if(bq==3){_self.removeLine(a5[0].id);a5[0].id="area_poly";bu.id="area_poly"}else{_self.removePolygon(a5[0].id)}updateCanvas(0,0);a5[0].B.push(bn);a5[0].L.push(bw);_self.addPolygon(a5[0].B,a5[0].L,bu,true);var bm=s();var br=q.GradToM(bn,bw);var bp=parseInt(aS-parseFloat(-(br[1])/g[aa]+aR/2-e[aa]/2)+aR/2)+10;var bo=parseInt(aK-parseFloat((br[0])/f[aa]+C/2-d[aa]/2)+C/2)+10;ai("belgis_area_div",bp,bo,bm,E)}}if(bq>0){bs=a5[0]["B"].length-1}bv.id="area_point"+bs;a5.push({B:bn,L:bw,id:"area_point"+bs});_self.addCircle(bn,bw,bv,true)};var bc=function(){var bm=z.length-1;if(bm==-1){return false}var bo=document.getElementById("belgis_dist");if(typeof(bo)!="undefined"&&bo!=null){document.getElementById(a9).removeChild(bo)}aM=0;aQ=0;var bn=0;while(bn<bm){_self.removeCircle(z[bn]["id"]);bn++;_self.removeLine(z[bn]["id"]);bn++}_self.removeCircle(z[bn]["id"]);z.length=0;updateCanvas(0,0);return false};function E(){var bo=document.getElementById("belgis_area_div");if(typeof(bo)!="undefined"&&bo!=null){document.getElementById(a9).removeChild(bo)}var bm=a5.length;if(bm>3){_self.removePolygon(a5[0].id);a5.splice(0,1);bm--}else{if(bm==3){_self.removeLine(a5[0].id);a5.splice(0,1);bm--}}for(var bn=0;bn<bm;bn++){mm.removeCircle(a5[bn].id)}a5.splice(0,bm);a5=new Array();updateCanvas(0,0);return false}var l=function(bn){var bs={dLeft:aS,dTop:aK,metersXS:e[aa],metersYS:d[aa],PixelMeterX:g[aa],PixelMeterY:f[aa],width:aR,height:C};clearContent(aT,F.width,F.height);gLayer.recalcAllGraphics(aT,bs);var bm=z.length;if(bm>1){bm--;var bo=q.GradToM(z[bm]["B"],z[bm]["L"]);var br=parseInt(aS-parseFloat(-(bo[1])/g[aa]+aR/2-e[aa]/2)+aR/2)+10;var bq=parseInt(aK-parseFloat((bo[0])/f[aa]+C/2-d[aa]/2)+C/2)+10;var bp=document.getElementById("belgis_dist");if(typeof(bp)!="undefined"&&bp!=null){bp.style.left=br+"px";bp.style.top=bq+"px";aM=br;aQ=bq}else{var bt=j();ai("belgis_dist",br,bq,bt,bc)}}bm=a5.length;if(bm>3){bm=a5[0]["B"].length-1;var bo=q.GradToM(a5[0]["B"][bm],a5[0]["L"][bm]);var br=parseInt(aS-parseFloat(-(bo[1])/g[aa]+aR/2-e[aa]/2)+aR/2)+10;var bq=parseInt(aK-parseFloat((bo[0])/f[aa]+C/2-d[aa]/2)+C/2)+10;var bp=document.getElementById("belgis_area_div");if(typeof(bp)!="undefined"&&bp!=null){bp.style.left=br+"px";bp.style.top=bq+"px";aM=br;aQ=bq}else{var bt=j();ai("belgis_area_div",br,bq,bt,bc)}}};var aM=0;var aQ=0;var b=function(bo,bn){clearContent(aT,F.width,F.height);gLayer.repositionAllGraphics(aT,bo,bn);var bm=z.length;if(bm>1){var bp=document.getElementById("belgis_dist");if(typeof(bp)!="undefined"&&bp!=null){bp.style.left=aM+bo+"px";bp.style.top=aQ+bn+"px"}}bm=a5.length;if(bm>3){var bp=document.getElementById("belgis_area_div");if(typeof(bp)!="undefined"&&bp!=null){bp.style.left=aM+bo+"px";bp.style.top=aQ+bn+"px"}}};var aw=function(){var bn=document.getElementById(ah);var bm=0;var bp=0;if(bn.style.top!=""){bp=parseInt(bn.style.top.replace("px",""));bm=parseInt(bn.style.left.replace("px",""))}var bo={dLeft:aS-parseFloat(bm),dTop:aK-parseFloat(bp),metersXS:e[aa],metersYS:d[aa],PixelMeterX:g[aa],PixelMeterY:f[aa],width:aR,height:C,url:urlMapF};bb.recalcAllPOI(bo,ah)};function a7(){_self=this;this.rulerPoint={fill:true,stroke:true,id:"ruler_point",radius:4,stroke_width:"1",stroke_opacity:"0.5",stroke_color:"#085165",fill_opacity:"0.9",fill_color:"#085165",draggable:true};this.rulerLine={stroke:true,id:"ruler_line",stroke_width:"4",stroke_opacity:"0.7",stroke_color:"#085165",fill_opacity:"0.5",draggable:false};this.setDragMap=function(bm){aO=bm};this.init=function(bq,bn,br,bu,bo,bt,bm,bp,bs){def=jQuery.ajax({type:"GET",url:urlMapF+"/getright.php",data:"key="+bq+"&host="+window.location.host,dataType:"jsonp",async:false,success:function(bz){a2=bz.MapUrl;an.setUrls(a2,urlMapF);var bA=document.getElementById(aD);var bx=BelgeoCommon.getSize(bA);if(aR!=bx.width||C!=bx.height){aR=bx.width;C=bx.height}av=document.getElementById(aV);am=av.getContext("2d");for(ckey=0;ckey<bs.length;ckey++){aC[bs[ckey]]=document.getElementById(bs[ckey]);aY[bs[ckey]]=aC[bs[ckey]].getContext("2d");aC[bs[ckey]].width=aR;aC[bs[ckey]].height=C}F=document.getElementById(ab);aT=F.getContext("2d");av.width=F.width=aR;av.height=F.height=C;document.body.onresize=updateSize;if(typeof(bo)=="number"&&bo>0&&((bo^0)==bo)){h=bo-1}if(typeof(bm)=="number"&&bm>0&&((bm^0)==bm)&&(bm>h)){aP=bm}aF(bp);if(typeof(bn)!=="undefined"&&typeof(br)!=="undefined"&&typeof(bu)!=="undefined"){aE=bn;bd=br;a4=bu;aa=parseInt(bu)-1;aI=e[aa];x=d[aa];var bw=q.GradToM(bn,br);var by=bw[0];var bv=bw[1];aS=parseInt(-(bv)/g[aa]+aR/2-e[aa]/2);aK=parseInt((by)/f[aa]+C/2-d[aa]/2)}r();moveScalePointer();setTimeout("ViewScale()",0);if(typeof(bt)=="function"){setTimeout(bt,0)}}})};this.isDraggableCircleHovered=function(bn,bm){return gLayer.isDraggableCircleHovered(bn,bm)};this.getCircle=function(bn,bm){return gLayer.getCircle(bn,bm)};this.getCircleByBL=function(bq,bm){var bn=q.GradToM(bq,bm);var bp=parseInt(aS-parseFloat(-bn[1]/g[aa]+aR/2-e[aa]/2)+aR/2);var bo=parseInt(aK-parseFloat(bn[0]/f[aa]+C/2-d[aa]/2)+C/2);return gLayer.getCircle(bp,bo)};this.moveCircleToPoint=function(bo,bn,bm){A(bo,bn,bm)};this.rulerClick=function(bm,bo){var bn=document.getElementById("belgis_ruler");if(typeof(bm)=="undefined"||typeof(bo)=="undefined"){var bp=/belgis_ruler/;if(bp.test(bn.className)){bn.className=bn.className.replace(bp,"");be=0;bc()}else{var bq=bn.className;var br=bq.concat(" belgis_ruler");bn.className=br;be=1;E()}}else{if(bn.src==bm){bn.src=bo;be=1;E()}else{bn.src=bm;be=0;bc()}}return be};this.squareRulerClick=function(bm,bo){var bn=document.getElementById("belgis_area");if(typeof(bm)=="undefined"||typeof(bo)=="undefined"){var bp=/belgis_ruler/;if(bp.test(bn.className)){bn.className=bn.className.replace(bp,"");be=0;E()}else{var bq=bn.className;var br=bq.concat(" belgis_ruler");bn.className=br;be=11;bc()}}else{if(bn.src==bm){bn.src=bo;be=11;bc()}else{bn.src=bm;be=0;E()}}return be};this.addEventListener=function(bm,bn){if(bm=="mapChange"){bh=bn}};this.MapObserve=function(bo,bn,bm){var bp=bm;bf(bo);bm=function(bt){var bu=al[0];var bq=al[1];var br=a8[0];var bs=a8[1];return bp.call(this,bt,bq,bu,br,bs)};t(aD,bn,bm)};this.onUrlMap=function(bt,bq,bp){new_scale=parseInt(bp)-1;new_scale=(new_scale>aA)?aA:new_scale;var bs=false;if(aa!=new_scale){aa=new_scale;bs=true}aI=e[aa];x=d[aa];var bn=q.GradToM(bt,bq);var bo=bn[0];var bm=bn[1];aS=parseInt(-(bm)/g[aa]+aR/2-e[aa]/2);aK=parseInt((bo)/f[aa]+C/2-d[aa]/2);var br=document.getElementById(ah);br.style.top="0px";br.style.left="0px";ViewScale();setTimeout(dragMap("onUrlMap"),0);if(bs){setTimeout("mapChanged('zoom')",0)}};this.getMapStatus=function(){var bn=new Array(2);var bm=new Array(2);var bo=new Array(11);bn[1]=-parseInt((e[aa]/2+aS-aR/2)*g[aa]);bn[0]=parseInt((e[aa]/2+aK-C/2)*f[aa]);bm=q.XYtoBL(bn[1],bn[0]);bo[0]=aa+1;bo[1]=bm[0];bo[2]=bm[1];bn[1]=-parseInt((e[aa]/2+aS)*g[aa]);bn[0]=parseInt((e[aa]/2+aK-C)*f[aa]);bm=q.XYtoBL(bn[1],bn[0]);bo[3]=bm[0];bo[4]=bm[1];bn[1]=-parseInt((e[aa]/2+aS-aR)*g[aa]);bn[0]=parseInt((e[aa]/2+aK)*f[aa]);bm=q.XYtoBL(bn[1],bn[0]);bo[5]=bm[0];bo[6]=bm[1];return bo};this.currentMap=function(){return V};this.changeMap=function(bn){var bm=_self.getMapStatus();if(aF(bn)){if(bm[0]>aA){bm[0]=aA+1}setTimeout("_self.onUrlMap("+bm[1]+","+bm[2]+","+bm[0]+")",0);setTimeout("ViewScale()",0)}};this.changeLayer=function(bn){if(L==undefined||L.name!=bn){L=undefined;for(var bo=0;bo<ar.length;bo++){if(ar[bo].name==bn){L=ar[bo];break}}if(L!=undefined&&L.name!=bn){L=undefined}var bm=_self.getMapStatus();setTimeout("_self.onUrlMap("+bm[1]+","+bm[2]+","+bm[0]+")",0);setTimeout("ViewScale()",0)}};this.changeCircleBL=function(bp,bo,bn){var bm=q.GradToM(bo,bn);bo=bm[1];bn=bm[0];gLayer.changeCircleBL(bp,bo,bn)};this.changeLineBL=function(bt,bs,bq){var bo=0;var bm=bs.length;var bn=[0,0];var bp=new Array();var br=new Array();for(var bo=0;bo<bm;bo++){bn=q.GradToM(bs[bo],bq[bo]);bp[bo]=bn[1];br[bo]=bn[0]}gLayer.changeLineBL(bt,bp,br)};this.changePolygonBL=function(bt,bs,bq){var bo=0;var bm=bs.length;var bn=[0,0];var bp=new Array();var br=new Array();for(var bo=0;bo<bm;bo++){bn=q.GradToM(bs[bo],bq[bo]);bp[bo]=bn[1];br[bo]=bn[0]}gLayer.changePolygonBL(bt,bp,br)};this.getCircleBL=function(bo){var bn=gLayer.getCircleBL(bo);var bm=q.XYtoBL(bn.B,bn.L);return bm};this.getLineBL=function(bq){var bp=gLayer.getLineBL(bq);var bo=new Array();var bm=bp.B.length;for(var bn=0;bn<bm;bm++){bo[bn]=q.XYtoBL(bp.B[bn],bp.L[bn])}return bo};this.getPolygonBL=function(bq){var bp=gLayer.getPolygonBL(bq);var bo=new Array();var bm=bp.B.length;for(var bn=0;bn<bm;bm++){bo[bn]=q.XYtoBL(bp.B[bn],bp.L[bn])}return bo};this.removePolygon=function(bm){gLayer.removePolygon(bm)};this.removeLine=function(bm){gLayer.removeLine(bm)};this.removeCircle=function(bm){gLayer.removeCircle(bm)};this.recalcCircle=function(bn){var bm={dLeft:aS,dTop:aK,metersXS:e[aa],metersYS:d[aa],PixelMeterX:g[aa],PixelMeterY:f[aa],width:aR,height:C};gLayer.recalcCircle(bn,bm)};this.recalcPolygon=function(bn){var bm={dLeft:aS,dTop:aK,metersXS:e[aa],metersYS:d[aa],PixelMeterX:g[aa],PixelMeterY:f[aa],width:aR,height:C};gLayer.recalcPolygon(bn,bm)};this.recalcLine=function(bn){var bm={dLeft:aS,dTop:aK,metersXS:e[aa],metersYS:d[aa],PixelMeterX:g[aa],PixelMeterY:f[aa],width:aR,height:C};gLayer.recalcLine(bn,bm)};this.addCircle=function(bm,bs,bp,bt){var br=bm;var bn=bs;var bq=new Array();bq.id=bp.id;bq.fill=bp.fill;bq.stroke=bp.stroke;bq.stroke_width=bp.stroke_width;bq.stroke_opacity=bp.stroke_opacity;bq.stroke_color=bp.stroke_color;bq.fill_opacity=bp.fill_opacity;bq.fill_color=bp.fill_color;bq.clickFunc=bp.clickFunc;bq.draggable=bp.draggable;bq.clickable=bp.clickable;bq.cursor=bp.cursor;bq.radius=bp.radius;bq.m_radius=bp.m_radius;var bo={dLeft:aS,dTop:aK,metersXS:e[aa],metersYS:d[aa],PixelMeterX:g[aa],PixelMeterY:f[aa],width:aR,height:C};var bu=q.GradToM(br,bn);br=bu[1];bn=bu[0];gLayer.addCircle(aT,br,bn,bq,bo,bt)};this.addLine=function(bm,bu,bp,bv){var br=new Array();br.id=bp.id;br.stroke=bp.stroke;br.stroke_width=bp.stroke_width;br.stroke_opacity=bp.stroke_opacity;br.stroke_color=bp.stroke_color;br.clickFunc=bp.clickFunc;br.draggable=bp.draggable;br.clickable=bp.clickable;br.cursor=bp.cursor;var bo={dLeft:aS,dTop:aK,metersXS:e[aa],metersYS:d[aa],PixelMeterX:g[aa],PixelMeterY:f[aa],width:aR,height:C};var bt=new Array();var bn=new Array();var bw=[0,0];var bs=bm.length;for(var bq=0;bq<bs;bq++){bt[bq]=bm[bq];bn[bq]=bu[bq];bw=q.GradToM(bt[bq],bn[bq]);bt[bq]=bw[1];bn[bq]=bw[0]}gLayer.addLine(aT,bt,bn,br,bo,bv)};this.addPolygon=function(bm,bu,bp,bv){var br=new Array();br.id=bp.id;br.fill=bp.fill;br.stroke=bp.stroke;br.stroke_width=bp.stroke_width;br.stroke_opacity=bp.stroke_opacity;br.stroke_color=bp.stroke_color;br.fill_opacity=bp.fill_opacity;br.fill_color=bp.fill_color;br.clickFunc=bp.clickFunc;br.draggable=bp.draggable;br.clickable=bp.clickable;br.cursor=bp.cursor;var bo={dLeft:aS,dTop:aK,metersXS:e[aa],metersYS:d[aa],PixelMeterX:g[aa],PixelMeterY:f[aa],width:aR,height:C};var bt=new Array();var bn=new Array();var bw=[0,0];var bs=bm.length;for(var bq=0;bq<bs;bq++){bt[bq]=bm[bq];bn[bq]=bu[bq];bw=q.GradToM(bt[bq],bn[bq]);bt[bq]=bw[1];bn[bq]=bw[0]}gLayer.addPolygon(aT,bt,bn,br,bo,bv)};this.addPoiBL=function(bn,bs){var bp=document.getElementById(ah);var bm=0;var br=0;if(bp.style.top!=""){br=parseInt(bp.style.top.replace("px",""));bm=parseInt(bp.style.left.replace("px",""))}var bo=q.GradToM(bn.lon,bn.lat);bn.lon=bo[1];bn.lat=bo[0];var bq={dLeft:aS-parseFloat(bm),dTop:aK-parseFloat(br),metersXS:e[aa],metersYS:d[aa],PixelMeterX:g[aa],PixelMeterY:f[aa],width:aR,height:C,url:urlMapF};bb.addPoi(bn,bq,ah,bs)};this.addPoiM=function(bn,br){var bo=document.getElementById(ah);var bm=0;var bq=0;if(bo.style.top!=""){bq=parseInt(bo.style.top.replace("px",""));bm=parseInt(bo.style.left.replace("px",""))}var bp={dLeft:aS-parseFloat(bm),dTop:aK-parseFloat(bq),metersXS:e[aa],metersYS:d[aa],PixelMeterX:g[aa],PixelMeterY:f[aa],width:aR,height:C,url:urlMapF};bb.addPoi(bn,bp,ah,br)};this.removePOI=function(bm){bb.removePoi(bm)};this.removeAllPOI=function(){bb.removeAllPoi(ah)};this.addOverlayLayer=function(bp,bm,bn,bo){bl[bp]=new WMSLayer(bm,bn,bo)};this.changeOverlayLayer=function(bp,bm,bn,bo){if(typeof(bl[bp])!="undefined"){bl[bp].setWMSLayerOpacity(bm);bl[bp].setWMSUrl(bn);bl[bp].setWMSLayersList(bo);dragMap("changeOverlayLayer")}};this.changeOverlayUrl=function(bn,bm){bl[bn].setWMSUrl(bm);dragMap("changeOverlayUrl")};this.getOverlayData=function(bp,bm,bo){var bn=aY[bp].getImageData(bm,bo,1,1);return bn};this.changeOverlayOpacity=function(bn,bm){if(typeof(bl[bn])!="undefined"){bl[bn].setWMSLayerOpacity(bm);dragMap("changeOverlayOpacity")}};this.changeOverlayLayers=function(bn,bm){if(typeof(bl[bn])!="undefined"){bl[bn].setWMSLayersList(bm);dragMap("changeOverlayLayers")}}}return new a7()};