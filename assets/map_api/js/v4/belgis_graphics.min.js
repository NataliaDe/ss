GraphicsLayer=function(){var j=new Array();var f=new Array();var b=new Array();var e=0;var h=0;var g=0;var c="belgis_polygon";var d="belgis_circle";var a="belgis_line";Circle=function(k,o,m,s){if(typeof(m.radius)=="undefined"||m.radius==""){m.radius=GraphicsLayer.defaultParams.radius}if(typeof(m.stroke)=="undefined"||m.stroke==""){m.stroke=GraphicsLayer.defaultParams.stroke}if(typeof(m.fill)=="undefined"||m.fill==""){m.fill=GraphicsLayer.defaultParams.fill}if(m.stroke){if(typeof(m.stroke_width)=="undefined"||m.stroke_width==""){m.stroke_width=GraphicsLayer.defaultParams.stroke_width}if(typeof(m.stroke_opacity)=="undefined"||m.stroke_opacity==""){m.stroke_opacity=GraphicsLayer.defaultParams.stroke_opacity}if(typeof(m.stroke_color)=="undefined"||m.stroke_color==""){m.stroke_color=GraphicsLayer.defaultParams.stroke_color}}else{m.stroke_width="0px";m.stroke_opacity=0;m.stroke_color="none"}if(m.fill){if(typeof(m.fill_opacity)=="undefined"||m.fill_opacity==""){m.fill_opacity=GraphicsLayer.defaultParams.fill_opacity}if(typeof(m.fill_color)=="undefined"||m.fill_color==""){m.fill_color=GraphicsLayer.defaultParams.fill_color}}else{m.fill_opacity=0;m.fill_color="none"}if(typeof(m.draggable)=="undefined"){m.draggable=GraphicsLayer.defaultParams.draggable}if(typeof(m.clickable)=="undefined"){m.clickable=GraphicsLayer.defaultParams.clickable}this.draggable=m.draggable;this.clickable=m.clickable;var p="default";if(this.draggable){p="move"}if(this.clickable){p="pointer"}this.dragging=false;this.id=m.id;this.L=o;this.B=k;this.radius=m.radius;if(typeof(m.m_radius)=="undefined"||m.m_radius==""){this.m_radius=GraphicsLayer.defaultParams.m_radius}else{this.m_radius=m.m_radius}var r=false;var q="none";var l=0;var n=this;if(typeof(m.fill_color)!="undefined"&&m.fill_color!=""){r=true;q=m.fill_color;if((typeof(m.fill_opacity)!="undefined"&&m.fill_opacity!="")){l=m.fill_opacity}else{l=1}}if(this.m_radius!=-1){this.radius=this.m_radius/s.PixelMeterX}this.changeBL=function(u,t){if((typeof(u)!="undefined"||u!="")&&(typeof(t)!="undefined"||t!="")){this.B=u;this.L=t}};this.recalc=function(v){var u=parseInt(v.dLeft-parseFloat(-(this.B)/v.PixelMeterX+v.width/2-v.metersXS/2)+v.width/2);var w=parseInt(v.dTop-parseFloat((this.L)/v.PixelMeterY+v.height/2-v.metersYS/2)+v.height/2);var t=this.m_radius/v.PixelMeterX;this.x=u;this.y=w;if(this.m_radius!=-1){this.radius=t}};this.isHovered=function(t,w){if(!this.draggable&&!this.clickable){return false}var v=this.x-t;var u=this.y-w;return(v*v+u*u<this.radius*this.radius)};this.recalc(s);this.draw=function(t,v,u){if(typeof(v)=="undefined"){v=0}if(typeof(u)=="undefined"){u=0}t.save();t.beginPath();t.arc(this.x+v,this.y+u,this.radius,0,2*Math.PI,false);t.fillStyle=m.fill_color;t.globalAlpha=m.fill_opacity;t.fill();t.lineWidth=m.stroke_width;t.strokeStyle=m.stroke_color;t.globalAlpha=m.stroke_opacity;t.stroke();t.closePath();t.restore()}};Line=function(p,l,m,k){if(typeof(m.stroke)=="undefined"||m.stroke==""){m.stroke=GraphicsLayer.defaultParams.stroke}if(m.stroke){if(typeof(m.stroke_width)=="undefined"||m.stroke_width==""){m.stroke_width=GraphicsLayer.defaultParams.stroke_width}if(typeof(m.stroke_opacity)=="undefined"||m.stroke_opacity==""){m.stroke_opacity=GraphicsLayer.defaultParams.stroke_opacity}if(typeof(m.stroke_color)=="undefined"||m.stroke_color==""){m.stroke_color=GraphicsLayer.defaultParams.stroke_color}}else{m.stroke_width="0px";m.stroke_opacity=0;m.stroke_color="none"}if(typeof(m.draggable)=="undefined"){m.draggable=GraphicsLayer.defaultParams.draggable}if(typeof(m.clickable)=="undefined"){m.clickable=GraphicsLayer.defaultParams.clickable}this.draggable=m.draggable;this.clickable=m.clickable;var o="default";if(this.draggable){o="move"}if(this.clickable){o="pointer"}this.id=m.id;this.coorLen=l.length;this.L=new Array(this.coorLen);this.B=new Array(this.coorLen);for(var n=0;n<this.coorLen;n++){this.L[n]=l[n];this.B[n]=p[n]}this.isDraggableHovered=function(q,r){if(this.draggable){return this.isHovered(q,r)}return false};this.isHovered=function(B,z){if(!this.draggable&&!this.clickable){return false}for(var u=0;u<this.coorLen-1;u++){var s=this.x[u+1]-this.x[u];var q=this.y[u+1]-this.y[u];var v=Math.abs(q*x0-s*y0-t*w+r*A)/Math.sqrt(Math.pow(s,2)+Math.pow(q,2));var t=Math.min(this.x[u],this.x[u+1]);var r=Math.max(this.x[u],this.x[u+1]);var A=Math.min(this.y[u],this.y[u+1]);var w=Math.max(this.y[u],this.y[u+1]);return(v==0&&t<=x0&&x0<=r&&A<=y0&&y0<=w)}return false};this.recalc=function(t){var r=new Array();var u=new Array();var s="";for(var q=0;q<this.coorLen;q++){r.push(parseInt(t.dLeft-parseFloat(-(this.B[q])/t.PixelMeterX+t.width/2-t.metersXS/2)+t.width/2));u.push(parseInt(t.dTop-parseFloat((this.L[q])/t.PixelMeterY+t.height/2-t.metersYS/2)+t.height/2));s+=r+" "+u+" "}this.x=r;this.y=u};this.recalc(k);this.changeBL=function(t,r){var q=this.B.length;for(var s=0;s<q;s++){if((typeof(t[s])!="undefined"||t[s]!="")&&(typeof(r[s])!="undefined"||r[s]!="")){this.B[s]=t[s];this.L[s]=r[s]}}};this.draw=function(r,t,s){if(typeof(t)=="undefined"){t=0}if(typeof(s)=="undefined"){s=0}r.save();r.beginPath();r.lineWidth=m.stroke_width;r.strokeStyle=m.stroke_color;r.globalAlpha=m.stroke_opacity;r.moveTo(this.x[0]+t,this.y[0]+s);for(var q=1;q<this.x.length;q++){r.lineTo(this.x[q]+t,this.y[q]+s)}r.stroke();r.closePath();r.restore()}};Polygon=function(q,l,m,k){if(typeof(m.stroke)=="undefined"||m.stroke==""){m.stroke=GraphicsLayer.defaultParams.stroke}if(typeof(m.fill)=="undefined"||m.fill==""){m.fill=GraphicsLayer.defaultParams.fill}if(m.stroke){if(typeof(m.stroke_width)=="undefined"||m.stroke_width==""){m.stroke_width=GraphicsLayer.defaultParams.stroke_width}if(typeof(m.stroke_opacity)=="undefined"||m.stroke_opacity==""){m.stroke_opacity=GraphicsLayer.defaultParams.stroke_opacity}if(typeof(m.stroke_color)=="undefined"||m.stroke_color==""){m.stroke_color=GraphicsLayer.defaultParams.stroke_color}}else{m.stroke_width="0px";m.stroke_opacity=0;m.stroke_color="none"}if(m.fill){if(typeof(m.fill_opacity)=="undefined"||m.fill_opacity==""){m.fill_opacity=GraphicsLayer.defaultParams.fill_opacity}if(typeof(m.fill_color)=="undefined"||m.fill_color==""){m.fill_color=GraphicsLayer.defaultParams.fill_color}}else{m.fill_opacity=0;m.fill_color="none"}if(typeof(m.draggable)=="undefined"){m.draggable=GraphicsLayer.defaultParams.draggable}if(typeof(m.clickable)=="undefined"){m.clickable=GraphicsLayer.defaultParams.clickable}this.draggable=m.draggable;this.clickable=m.clickable;this.clickFunc=m.clickFunc;var p="default";if(this.draggable){p="move"}if(this.clickable){p="pointer"}this.id=m.id;this.coorLen=l.length;this.L=new Array();this.B=new Array();for(var o=0;o<this.coorLen;o++){this.L[o]=l[o];this.B[o]=q[o]}if(l[this.coorLen-1]!=l[0]&&q[this.coorLen-1]!=q[0]){this.L.push(l[0]);this.B.push(q[0]);this.coorLen++}var n=this;this.isDraggableHovered=function(r,s){if(this.draggable){return this.isHovered(r,s)}return false};this.isHovered=function(C,B){if(!this.draggable&&!this.clickable){return false}var t=false;for(var w=0,v=this.x.length-1;w<this.x.length;v=w++){var A=this.x[w],u=this.y[w];var z=this.x[v],s=this.y[v];var r=((u>B)!=(s>B))&&(C<(z-A)*(B-u)/(s-u)+A);if(r){t=!t}}return t};this.recalc=function(t){var s=new Array();var u=new Array();for(var r=0;r<this.coorLen;r++){s.push(parseInt(t.dLeft-parseFloat(-(this.B[r])/t.PixelMeterX+t.width/2-t.metersXS/2)+t.width/2));u.push(parseInt(t.dTop-parseFloat((this.L[r])/t.PixelMeterY+t.height/2-t.metersYS/2)+t.height/2))}if(s[0]!=s[this.coorLen-1]||u[0]!=u[this.coorLen-1]){s.push(s[0]);u.push(u[0])}this.x=s;this.y=u};this.changeBL=function(u,s){var r=u.length;this.B.splice(0,this.B.length);this.B=new Array();this.L.splice(0,this.L.length);this.L=new Array();for(var t=0;t<r;t++){this.L.push(s[t]);this.B.push(u[t])}if(this.L[r-1]!=s[0]&&u[r-1]!=u[0]){this.L.push(s[0]);this.B.push(u[0])}this.coorLen=this.B.length};this.recalc(k);this.draw=function(s,u,t){if(typeof(u)=="undefined"){u=0}if(typeof(t)=="undefined"){t=0}s.save();s.beginPath();s.lineWidth=m.stroke_width;s.strokeStyle=m.stroke_color;s.globalAlpha=m.stroke_opacity;s.fillStyle=m.fill_color;s.globalAlpha=m.fill_opacity;s.moveTo(this.x[0]+u,this.y[0]+t);for(var r=1;r<this.x.length;r++){s.lineTo(this.x[r]+u,this.y[r]+t)}s.fill();s.stroke();s.closePath();s.restore()}};this.addCircle=function(o,q,k,m,p,l){var n=0;if(l){b[h]=new Circle(q,k,m,p);n=h}else{b.unshift(new Circle(q,k,m,p))}b[n].draw(o);h++};this.addLine=function(o,q,k,m,p,l){var n=0;if(l){j[e]=new Line(q,k,m,p);n=e}else{j.unshift(new Line(q,k,m,p))}j[n].draw(o);e++};this.addPolygon=function(o,q,k,m,p,l){var n=0;if(l){f[g]=new Polygon(q,k,m,p);n=g}else{f.unshift(new Polygon(q,k,m,p))}f[n].draw(o);g++};this.removeCircle=function(m,l){var k=0;while(k<h){if(b[k].id==m){b.splice(k,1);h--;break}k++}};this.removeLine=function(l){var k=0;while(k<e){if(j[k].id==l){j.splice(k,1);e--;break}k++}};this.removePolygon=function(l){var k=0;while(k<g){if(f[k].id==l){f.splice(k,1);g--;break}k++}};this.removeAllGraphics=function(){j.splice(0,e);b.splice(0,h);f.splice(0,g);images.splice(0,imagesCnt);e=0;h=0;g=0;imagesCnt=0};this.changeCircleBL=function(n,m,k){var l=0;while(l<h){if(b[l].id==n){b[l].changeBL(m,k);break}l++}};this.changeLineBL=function(n,m,k){var l=0;while(l<e){if(j[l].id==n){j[l].changeBL(m,k);break}l++}};this.changePolygonBL=function(o,n,k,m){var l=0;while(l<g){if(f[l].id==o){f[l].changeBL(n,k);break}l++}};this.getGraphicElement=function(l){var k=0;while(k<h){if(b[k].id==l){return b[k]}k++}k=0;while(k<e){if(j[k].id==l){return j[k]}k++}k=0;while(k<g){if(f[k].id==l){return f[k]}k++}return null};this.getCircle=function(l){var k=0;while(k<h){if(b[k].id==l){return b[k]}k++}return null};this.getCircle=function(k,m){var l=0;while(l<h){if(b[l].isHovered(k,m)){return b[l]}l++}return null};this.getLine=function(l){var k=0;while(k<e){if(j[k].id==l){return j[k]}k++}return null};this.getPolygon=function(l){var k=0;while(k<g){if(f[k].id==l){return f[k]}k++}return null};this.getCircleBL=function(l){var k=0;while(k<h){if(b[k].id==l){return{B:b[k].B,L:b[k].L}}k++}};this.getLineBL=function(p){i=0;while(i<e){if(j[i].id==p){var o=j[i].B.length;var l=new Array();var m=new Array();for(var n=0;n<o;n++){l[n]=j[i].B[n];m[n]=j[i].L[n]}return{B:l,L:m}}i++}};this.getPolygonBL=function(p){i=0;while(i<g){if(f[i].id==p){var o=f[i].B.length;var l=new Array();var m=new Array();for(var n=0;n<o;n++){l[n]=f[i].B[n];m[n]=f[i].L[n]}return{B:l,L:m}}i++}};this.recalcCircle=function(m,l){var k=0;while(k<h){if(b[k].id==m){b[k].recalc(l);break}k++}};this.recalcLine=function(m,l){var k=0;while(k<e){if(j[k].id==m){j[k].recalc(l);break}k++}};this.recalcPolygon=function(m,l){var k=0;while(k<g){if(f[k].id==m){f[k].recalc(l);break}k++}};this.repositionCircle=function(o,k,n,m){var l=0;while(l<h){if(b[l].id==o){b[l].draw(k,n,m);break}l++}};this.repositionLine=function(o,k,n,m){var l=0;while(l<e){if(j[l].id==o){j[l].draw(k,n,m);break}l++}};this.recalcAllGraphics=function(k,m){var l=0;for(;l<g;l++){f[l].recalc(m);f[l].draw(k)}l=0;for(;l<e;l++){j[l].recalc(m);j[l].draw(k)}l=0;for(;l<h;l++){b[l].recalc(m);b[l].draw(k)}l=0};this.repositionAllGraphics=function(k,n,m){var l=0;for(;l<g;l++){f[l].draw(k,n,m)}l=0;for(;l<e;l++){j[l].draw(k,n,m)}l=0;for(;l<h;l++){b[l].draw(k,n,m)}};this.isGraphicObjectHovered=function(k,m){var l=0;for(;l<h;l++){if(b[l].isHovered(k,m)){return true}}l=0;for(;l<e;l++){if(j[l].isHovered(k,m)){return true}}l=0;for(;l<g;l++){if(f[l].isHovered(k,m)){return true}}return false};this.isCircleHovered=function(k,m){var l=0;for(;l<h;l++){if(b[l].isHovered(k,m)){return true}}return false};this.isLineHovered=function(k,m){var l=0;for(;l<e;l++){if(j[l].isHovered(k,m)){return true}}return false};this.isPolygonHovered=function(k,m){var l=0;for(;l<g;l++){if(f[l].isHovered(k,m)){return true}}return false};this.isDraggableCircleHovered=function(k,m){var l=0;for(;l<h;l++){if(b[l].draggable&&b[l].isHovered(k,m)){return true}}return false};this.observe=function(n,m,l){var k=0;k=0;k=0}};GraphicsLayer.defaultParams={fill:true,stroke:true,stroke_width:"2",stroke_opacity:"1",stroke_color:"#0000ff",fill_opacity:"1",fill_color:"#0000ff",m_radius:-1,radius:10,clickFunc:false,draggable:false,clickable:false,cursor:"default"};